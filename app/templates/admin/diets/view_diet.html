{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pdf_editor.css') }}">
{% endblock %}

{% block content %}

<h2>{{ diet.name }}</h2>
<br>
<p><strong>DescriÃ§Ã£o:</strong> {{ diet.description }}</p>

<div id="pdf-container">
    <canvas id="pdf-canvas"></canvas>
</div>
<div style="text-align: center; margin: 10px 0;">
    <button id="prev-page">â¬… PÃ¡gina anterior</button>
    <span id="page-info">PÃ¡gina 1</span>
    <button id="next-page">PrÃ³xima pÃ¡gina âž¡</button>
</div>

{% if diet.diet_file %}
<p><a href="{{ url_for('diets.download_diet', filename=diet.diet_file, type_='original') }}" target="_blank">ðŸ“„ Baixar Arquivo Original</a></p>
{% endif %}

<hr>
<br>
<div class="nav-actions">
    <a class="back-button" href="{{ url_for('diets.list_diets') }}">ðŸ”™ Voltar</a>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
<script>
  pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js";
</script>

<script>
  const pdfUrl = "{{ pdf_url }}";
</script>

<script src="{{ url_for('static', filename='js/render_diet.js') }}" defer></script>
{% endblock %}
